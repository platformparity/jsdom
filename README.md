# Platform Parity

TODO WIP WIP

## Status

Below is a print-out of everything that's available in a `Worker` in Chrome (67). The goal of the platform parity project is to provide a reasonable implementation to all of these in node. Plenty won't have a reasonable implementation though. These should either be undefined or throw upon invocation (not sure which is better).

Couple of notes:

- Actually, the `ServiceWorker` would match the node environment more closely, but it makes too many assumptions. The goal (for now) is to provide commonly used stuff like `fetch`.
- Having an `IndexedDB` implementation for close-enough persistence needs right inside of node would be awesome, but that would be a considerable undertaking and I'm not sure I'd release that under MIT. There's in-memory IndexedDB implementations though, could try to plug that one in.
- Not clear what to do about the Cache API
- Probably going to drop the `DedicatedWorkerGlobalContext` stuff. Makes no sense here, does it?
  - On second thought, maybe that `postMessage` stuff could be repurposed to use some messaging protocol under the hood. Sounds a bit _too_ clever though...
- I've crossed out a couple of things I don't want to support at this point.
- I haven't look at some of these _at all_. They probably don't make a lot of sense either

### `WorkerGlobalContext` and friends

- [ ] `ByteLengthQueuingStrategy`
- [ ] `CountQueuingStrategy`
- [ ] `ReadableStream`
- [ ] `WritableStream`
- [ ] `TransformStream`
- [ ] `PushSubscriptionOptions`
- [ ] `PushSubscription`
- [ ] `PushManager`
- [ ] `PermissionStatus`
- [ ] `Permissions`
- [ ] `Notification`
- [ ] `BudgetService`
- [ ] `PerformanceServerTiming`
- [ ] ~~`DOMRectReadOnly`~~
- [ ] ~~`DOMRect`~~
- [ ] ~~`DOMQuad`~~
- [ ] ~~`DOMPointReadOnly`~~
- [ ] ~~`DOMPoint`~~
- [ ] ~~`DOMMatrixReadOnly`~~
- [ ] ~~`DOMMatrix`~~
- [ ] `WebSocket`
- [x] `TextEncoder` (polyfill, probably slow)
- [x] `TextDecoder` (polyfill, probably slow)
- [ ] `SyncManager`
- [x] `SubtleCrypto`
- [ ] ~~`ServiceWorkerRegistration`~~
- [ ] `NetworkInformation`
- [ ] `IDBVersionChangeEvent`
- [ ] `IDBTransaction`
- [ ] `IDBRequest`
- [ ] `IDBOpenDBRequest`
- [ ] `IDBObjectStore`
- [ ] `IDBKeyRange`
- [ ] `IDBIndex`
- [ ] `IDBFactory`
- [ ] `IDBDatabase`
- [ ] `IDBCursorWithValue`
- [ ] `IDBCursor`
- [ ] `EventSource`
- [x] `CryptoKey`
- [x] `Crypto` (not generated by `webidl2js` though)
- [ ] `CloseEvent`
- [ ] `BroadcastChannel`
- [ ] ~~`XMLHttpRequestUpload`~~
- [ ] ~~`XMLHttpRequestEventTarget`~~
- [ ] ~~`XMLHttpRequest`~~
- [x] `WorkerNavigator`
- [x] `WorkerLocation`
- [x] `WorkerGlobalScope`
- [x] `URLSearchParams` (part of node since v10)
- [x] `URL` (part of node since v10)
- [x] `Response`
- [x] `Request`
- [ ] `PromiseRejectionEvent`
- [x] `ProgressEvent`
- [ ] `PerformanceResourceTiming`
- [ ] `PerformanceObserverEntryList`
- [ ] `PerformanceObserver`
- [ ] `PerformanceEntry`
- [ ] `MessagePort`
- [x] `MessageEvent`
- [ ] `MessageChannel`
- [ ] ~~`ImageData`~~
- [ ] ~~`ImageBitmap`~~
- [x] `Headers`
- [x] `FormData`
- [ ] ~~`FileReaderSync`~~
- [x] `FileReader`
- [x] `FileList`
- [x] `File`
- [x] `EventTarget`
- [x] `Event`
- [ ] `DedicatedWorkerGlobalScope`
- [ ] ~~`DOMStringList`~~
- [x] `DOMException`
- [x] `CustomEvent`
- [x] `Blob`
- [x] `AbortSignal`
- [x] `AbortController`
- [ ] `onmessage`
- [ ] `onmessageerror`
- [ ] `postMessage`
- [ ] `close`
- [ ] ~~`webkitRequestFileSystem`~~
- [ ] ~~`webkitRequestFileSystemSync`~~
- [ ] ~~`webkitResolveLocalFileSystemURL`~~
- [ ] ~~`webkitResolveLocalFileSystemSyncURL`~~
- [x] `BigInt` (part of node since v?)
- [x] `WebAssembly` (part of node since v?)
- [ ] `Cache`
- [ ] `CacheStorage`
- [ ] `NavigationPreloadManager`
- [ ] `StorageManager`
- [ ] `TEMPORARY`
- [ ] `PERSISTENT`
- [x] `self`
- [x] `location`
- [x] `onerror` (never fired)
- [x] `navigator`
- [x] `onrejectionhandled` (never fired)
- [x] `onunhandledrejection`(never fired)
- [ ] `isSecureContext`
- [x] `origin`
- [ ] `performance`
- [x] `importScripts`
- [x] `fetch`
- [x] `btoa`
- [x] `atob`
- [x] `setTimeout`
- [x] `clearTimeout`
- [x] `setInterval`
- [x] `clearInterval`
- [ ] `createImageBitmap`
- [x] `crypto`
- [ ] `indexedDB`
- [ ] `caches`
- [x] `addEventListener`
- [x] `removeEventListener`
- [x] `dispatchEvent`

### `Navigator`

- [x] `hardwareConcurrency`
- [x] `appCodeName`
- [x] `appName`
- [x] `appVersion`
- [x] `platform`
- [x] `product`
- [x] `userAgent`
- [x] `onLine`
- [ ] `connection`
- [ ] `budget`
- [ ] `permissions`
- [ ] `deviceMemory`
- [ ] `storage`
